<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Month 1: Greetings & Numbers - ESL Games Hub</title>
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/games.css">
</head>
<body>
    <div class="background"></div>
    <div class="floating-shapes">
        <div class="floating-shape shape-1"></div>
        <div class="floating-shape shape-2"></div>
        <div class="floating-shape shape-3"></div>
    </div>

    <header>
        <nav>
            <div class="logo">ğŸ® ESL Games Hub</div>
            <ul class="nav-links">
                <li><a href="../index.html">Home</a></li>
                <li><a href="#progress">Progress</a></li>
                <li><a href="#games">Games</a></li>
                <li><a href="#achievements">Achievements</a></li>
            </ul>
        </nav>
    </header>

    <section class="hero">
        <h1 id="month-title">ğŸŒŸ Month 1: Getting Started! ğŸŒŸ</h1>
        <p id="month-subtitle">Learn greetings, numbers, and basic English expressions</p>
        <div class="student-welcome" id="student-welcome" style="display: none; margin-top: 2rem;">
            <span id="student-name">Student</span>, you're doing great! Keep learning! ğŸš€
        </div>
    </section>

    <main>
        <!-- Month Progress Overview -->
        <section class="section" id="progress">
            <h2>ğŸ“Š Your Month 1 Progress</h2>
            <p>Track your progress through the first month of English learning!</p>
            
            <div class="stats-dashboard">
                <div class="stat-card">
                    <span class="stat-number" id="month-games-played">0</span>
                    <span class="stat-label">Games Played</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="month-best-score">0</span>
                    <span class="stat-label">Best Score</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="month-achievements">0</span>
                    <span class="stat-label">Achievements</span>
                </div>
            </div>

            <!-- Progress Bar -->
            <div style="margin-top: 2rem;">
                <h3 style="margin-bottom: 1rem;">Month 1 Completion</h3>
                <div class="progress-bar">
                    <div class="progress-fill" id="month-progress-bar" style="width: 0%;"></div>
                </div>
                <p style="text-align: center; margin-top: 0.5rem; color: #667eea; font-weight: bold;">
                    <span id="progress-percentage">0</span>% Complete
                </p>
            </div>
        </section>

        <!-- Available Games Section -->
        <section class="section" id="games">
            <h2>ğŸ® Month 1 Games</h2>
            <p>Practice what you've learned with these interactive games!</p>
            
            <div class="games-grid">
                <!-- Hello Numbers Game -->
                <div class="game-card">
                    <h3>ğŸŒŸ Hello Numbers Game</h3>
                    <p>Practice greetings, numbers, polite expressions, and age-related vocabulary all in one game!</p>
                    <p><strong>Skills:</strong> Listening, Reading, Grammar</p>
                    <p><strong>Questions:</strong> 15 mixed topics</p>
                    <div class="achievement">âœ… Ready to Play</div>
                    <div class="best-score" id="hello-numbers-best" style="display: none;">
                        Your best: 0%
                    </div>
                    <button class="play-button" onclick="window.open('../games/hello-numbers-game.html', '_blank')">
                        ğŸ¯ Play Now
                    </button>
                </div>

                <!-- Coming Soon: Colors Game -->
                <div class="game-card">
                    <h3>ğŸ¨ Colors & Objects Match</h3>
                    <p>Match classroom objects with their colors in this fun drag-and-drop game.</p>
                    <p><strong>Skills:</strong> Vocabulary, Visual Recognition</p>
                    <p><strong>Activity:</strong> Interactive matching</p>
                    <div class="achievement">ğŸ”’ Coming Soon</div>
                    <button class="play-button" disabled>
                        <span class="loading"></span> In Development
                    </button>
                </div>

                <!-- Coming Soon: Family Tree -->
                <div class="game-card">
                    <h3>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Family Tree Builder</h3>
                    <p>Create your family tree and practice family vocabulary with this interactive builder.</p>
                    <p><strong>Skills:</strong> Speaking, Vocabulary, Grammar</p>
                    <p><strong>Activity:</strong> Creative construction</p>
                    <div class="achievement">ğŸ”’ Coming Soon</div>
                    <button class="play-button" disabled>
                        <span class="loading"></span> In Development
                    </button>
                </div>

                <!-- Coming Soon: Number Practice -->
                <div class="game-card">
                    <h3>ğŸ”¢ Number Master</h3>
                    <p>Advanced number practice with math problems and number spelling challenges.</p>
                    <p><strong>Skills:</strong> Numbers, Math, Spelling</p>
                    <p><strong>Activity:</strong> Mixed number exercises</p>
                    <div class="achievement">ğŸ”’ Coming Soon</div>
                    <button class="play-button" disabled>
                        <span class="loading"></span> In Development
                    </button>
                </div>

                <!-- Coming Soon: Greeting Scenarios -->
                <div class="game-card">
                    <h3>ğŸ‘‹ Greeting Master</h3>
                    <p>Practice different greeting scenarios for various times of day and situations.</p>
                    <p><strong>Skills:</strong> Social English, Context</p>
                    <p><strong>Activity:</strong> Scenario practice</p>
                    <div class="achievement">ğŸ”’ Coming Soon</div>
                    <button class="play-button" disabled>
                        <span class="loading"></span> In Development
                    </button>
                </div>

                <!-- Coming Soon: Politeness Practice -->
                <div class="game-card">
                    <h3>ğŸ™ Politeness Pro</h3>
                    <p>Learn when and how to use "please," "thank you," and other polite expressions.</p>
                    <p><strong>Skills:</strong> Social Skills, Manners</p>
                    <p><strong>Activity:</strong> Situational practice</p>
                    <div class="achievement">ğŸ”’ Coming Soon</div>
                    <button class="play-button" disabled>
                        <span class="loading"></span> In Development
                    </button>
                </div>
            </div>
        </section>

        <!-- Month 1 Achievements -->
        <section class="section" id="achievements">
            <h2>ğŸ† Month 1 Achievements</h2>
            <p>Earn these special badges by completing Month 1 activities!</p>
            
            <div style="margin-top: 2rem;">
                <h3>ğŸŒŸ Available Achievements</h3>
                <div style="margin-top: 1rem;" id="month-achievements-list">
                    <div class="achievement">ğŸ¯ Loading achievements...</div>
                </div>
            </div>

            <div style="margin-top: 2rem;">
                <h3>ğŸ”’ Unlock These Next</h3>
                <div style="margin-top: 1rem;">
                    <div class="achievement locked">ğŸ¨ Color Master - Complete Colors game</div>
                    <div class="achievement locked">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Family Expert - Complete Family game</div>
                    <div class="achievement locked">ğŸ“š Month 1 Graduate - Complete all Month 1 games</div>
                    <div class="achievement locked">â­ Perfect Student - Score 100% on all Month 1 games</div>
                </div>
            </div>
        </section>

        <!-- Navigation -->
        <section class="section">
            <h2>ğŸ§­ What's Next?</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin-top: 2rem;">
                
                <div class="month-card" onclick="location.href='../index.html'">
                    <h3>ğŸ  Back to Home</h3>
                    <p>Return to the main dashboard</p>
                    <div class="achievement">ğŸ“Š View All Progress</div>
                </div>

                <div class="month-card" style="opacity: 0.6; cursor: not-allowed;">
                    <h3>ğŸ“… Month 2</h3>
                    <p>Daily Life & Food Games</p>
                    <div class="achievement locked">ğŸ”’ Complete Month 1 First</div>
                </div>

                <div class="month-card" onclick="downloadMonthProgress()">
                    <h3>ğŸ“„ Progress Report</h3>
                    <p>Download Month 1 summary</p>
                    <div class="achievement">ğŸ“Š Teacher Report</div>
                </div>

            </div>
        </section>
    </main>

    <footer id="contact">
        <p>ğŸŒŸ Month 1: Getting Started with English! ğŸŒŸ</p>
        <p>Keep practicing and you'll be amazing at English!</p>
        <p style="margin-top: 1rem; color: #718096;">
            Questions? Ask your teacher for help and encouragement.
        </p>
    </footer>

    <script src="../js/student-tracker.js"></script>
    <script>
        // Month 1 specific functionality
        class Month1Page {
            constructor() {
                this.month1Games = ['hello-numbers'];
                this.initializePage();
            }

            initializePage() {
                // Wait for student tracker to load
                setTimeout(() => {
                    this.updateStudentInfo();
                    this.updateMonthProgress();
                    this.updateGameScores();
                    this.updateAchievements();
                }, 100);
            }

            updateStudentInfo() {
                if (window.studentTracker) {
                    const studentName = window.studentTracker.getStudentName();
                    if (studentName) {
                        document.getElementById('student-name').textContent = studentName;
                        document.getElementById('student-welcome').style.display = 'block';
                        
                        // Update page title
                        document.getElementById('month-title').textContent = `ğŸŒŸ Welcome back, ${studentName}! ğŸŒŸ`;
                        document.getElementById('month-subtitle').textContent = 'Continue your Month 1 English journey';
                    }
                }
            }

            updateMonthProgress() {
                if (!window.studentTracker) return;

                const stats = window.studentTracker.getStats();
                const scores = window.studentTracker.getGameScores();
                
                // Calculate Month 1 specific stats
                const month1GameScores = Object.keys(scores).filter(game => 
                    this.month1Games.includes(game)
                );
                
                const gamesPlayed = month1GameScores.length;
                const bestScore = Math.max(0, ...month1GameScores.map(game => scores[game].bestScore));
                const achievements = this.getMonth1Achievements();
                
                // Update stat cards (removed lessons completed)
                document.getElementById('month-games-played').textContent = stats.gamesPlayed;
                document.getElementById('month-best-score').textContent = bestScore + '%';
                document.getElementById('month-achievements').textContent = achievements.length;
                
                // Update progress bar (based on games available, not lessons)
                const totalGames = 6; // Total planned games for Month 1
                const completedGames = gamesPlayed;
                const progressPercentage = Math.round((completedGames / totalGames) * 100);
                document.getElementById('month-progress-bar').style.width = progressPercentage + '%';
                document.getElementById('progress-percentage').textContent = progressPercentage;
            }

            updateGameScores() {
                if (!window.studentTracker) return;

                // Update Hello Numbers Game score
                const helloNumbersScore = window.studentTracker.getBestScore('hello-numbers');
                if (helloNumbersScore > 0) {
                    const scoreElement = document.getElementById('hello-numbers-best');
                    scoreElement.textContent = `Your best: ${helloNumbersScore}%`;
                    scoreElement.style.display = 'block';
                }
            }

            getMonth1Achievements() {
                if (!window.studentTracker) return [];
                
                const allAchievements = window.studentTracker.getAchievements();
                
                // Filter achievements that are relevant to Month 1
                const month1AchievementIds = ['welcome', 'first-game', 'good-score', 'perfect-score'];
                
                return Object.keys(allAchievements).filter(id => 
                    month1AchievementIds.includes(id)
                );
            }

            updateAchievements() {
                if (!window.studentTracker) return;

                const achievements = window.studentTracker.getAchievements();
                const achievementsList = document.getElementById('month-achievements-list');
                
                // Clear loading message
                achievementsList.innerHTML = '';
                
                // Add earned achievements
                const earnedAchievements = Object.values(achievements);
                if (earnedAchievements.length > 0) {
                    earnedAchievements.forEach(achievement => {
                        const badge = document.createElement('div');
                        badge.className = 'achievement';
                        badge.textContent = achievement.title;
                        badge.title = achievement.description;
                        achievementsList.appendChild(badge);
                    });
                } else {
                    // No achievements yet
                    const placeholder = document.createElement('div');
                    placeholder.className = 'achievement locked';
                    placeholder.textContent = 'ğŸ¯ Play your first game to earn achievements!';
                    achievementsList.appendChild(placeholder);
                }
            }
        }

        // Download Month 1 progress report
        function downloadMonthProgress() {
            if (window.studentTracker) {
                // Create month-specific report
                const studentName = window.studentTracker.getStudentName();
                const scores = window.studentTracker.getGameScores();
                const achievements = window.studentTracker.getAchievements();
                const stats = window.studentTracker.getStats();
                
                const month1Report = {
                    studentName: studentName,
                    month: 1,
                    title: "Month 1: Greetings & Numbers",
                    generatedDate: new Date().toISOString(),
                    summary: {
                        gamesCompleted: Object.keys(scores).length,
                        gamesPlayed: stats.gamesPlayed,
                        bestScore: Math.max(0, ...Object.values(scores).map(s => s.bestScore)),
                        achievementsEarned: Object.keys(achievements).length
                    },
                    gameResults: scores,
                    achievements: achievements,
                    nextMonth: "Month 2: Daily Life & Food"
                };
                
                // Download file
                const dataStr = JSON.stringify(month1Report, null, 2);
                const dataBlob = new Blob([dataStr], {type: 'application/json'});
                const url = URL.createObjectURL(dataBlob);
                
                const link = document.createElement('a');
                link.href = url;
                link.download = `${studentName || 'Student'}-Month1-Report-${new Date().toISOString().split('T')[0]}.json`;
                link.click();
                
                URL.revokeObjectURL(url);
            }
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            new Month1Page();
        });

        // Smooth scrolling for navigation
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });

        // Create floating shapes periodically
        function createFloatingShape() {
            const shape = document.createElement('div');
            shape.className = 'floating-shape';
            shape.style.width = Math.random() * 60 + 20 + 'px';
            shape.style.height = shape.style.width;
            shape.style.left = Math.random() * 100 + '%';
            shape.style.animationDuration = Math.random() * 20 + 15 + 's';
            shape.style.animationDelay = Math.random() * 5 + 's';
            
            const shapesContainer = document.querySelector('.floating-shapes');
            if (shapesContainer) {
                shapesContainer.appendChild(shape);
                
                setTimeout(() => {
                    if (shape.parentElement) {
                        shape.remove();
                    }
                }, 25000);
            }
        }

        setInterval(createFloatingShape, 3000);
    </script>
</body>
</html>
